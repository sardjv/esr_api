<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-alpha.65">
<title data-react-helmet="true">System Reset | ESR API</title><meta data-react-helmet="true" name="docsearch:version" content="current,latest"><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:title" content="System Reset | ESR API"><meta data-react-helmet="true" name="description" content="After a testing period, or if there has been data corruption, you may need to do a total reset of the system and start again from scratch."><meta data-react-helmet="true" property="og:description" content="After a testing period, or if there has been data corruption, you may need to do a total reset of the system and start again from scratch."><meta data-react-helmet="true" property="og:url" content="https://sardjv.github.io/esr_api/docs/reset"><link data-react-helmet="true" rel="shortcut icon" href="/esr_api/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://sardjv.github.io/esr_api/docs/reset"><link rel="stylesheet" href="/esr_api/styles.4900c5c4.css">
<link rel="preload" href="/esr_api/styles.30814504.js" as="script">
<link rel="preload" href="/esr_api/runtime~main.c65e3950.js" as="script">
<link rel="preload" href="/esr_api/main.2c04d539.js" as="script">
<link rel="preload" href="/esr_api/1.9ca11672.js" as="script">
<link rel="preload" href="/esr_api/2.76a9b4b6.js" as="script">
<link rel="preload" href="/esr_api/19.a52b2436.js" as="script">
<link rel="preload" href="/esr_api/20.8b904c54.js" as="script">
<link rel="preload" href="/esr_api/935f2afb.6023516d.js" as="script">
<link rel="preload" href="/esr_api/17896441.621aa397.js" as="script">
<link rel="preload" href="/esr_api/4601e8b1.bea090d6.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><div aria-label="Navigation bar toggle" class="navbar__toggle" role="button" tabindex="0"><svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></div><a class="navbar__brand" href="/esr_api/"><img class="navbar__logo" src="/esr_api/img/logo.svg" alt="My Site Logo"><strong class="navbar__title">ESR API</strong></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/esr_api/docs/quickstart">Docs</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/sardjv/esr_api/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub</a><div class="react-toggle react-toggle--disabled displayOnlyInLargeViewport_2aTZ"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_BsTx">ðŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_BsTx">ðŸŒž</span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" disabled="" aria-label="Dark mode toggle" class="react-toggle-screenreader-only"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/esr_api/"><img class="navbar__logo" src="/esr_api/img/logo.svg" alt="My Site Logo"><strong class="navbar__title">ESR API</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a aria-current="page" class="menu__link navbar__link--active" href="/esr_api/docs/quickstart">Docs</a></li><li class="menu__list-item"><a href="https://github.com/sardjv/esr_api/" target="_blank" rel="noopener noreferrer" class="menu__link">GitHub</a></li></ul></div></div></div></nav><div class="main-wrapper"><div class="docPage_2gpo"><div class="docSidebarContainer_3_JD" role="complementary"><div class="sidebar_2urC"><div class="menu menu--responsive menu_5FrY"><button aria-label="Open Menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg aria-label="Menu" class="sidebarMenuIcon_Dm3K" xmlns="http://www.w3.org/2000/svg" height="24" width="24" viewBox="0 0 32 32" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!">Information</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/esr_api/docs/quickstart">Quickstart</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/esr_api/docs/overview">Technical Overview</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/esr_api/docs/authentication">Authentication</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/esr_api/docs/requirements">Requirements</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/esr_api/docs/development">Development</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/esr_api/docs/reset">System Reset</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/esr_api/docs/documentation">Documentation</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/esr_api/docs/licenses">Licenses</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/esr_api/docs/security">Security</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Features</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/esr_api/docs/api">API</a></li></ul></li></ul></div></div></div><main class="docMainContainer_3EyW"><div class="container padding-vert--lg docItemWrapper_1EkI"><div class="row"><div class="col docItemCol_2ASc"><div class="docItemContainer_3QWW"><article><header><h1 class="docTitle_1Lrw">System Reset</h1></header><div class="markdown"><p>After a testing period, or if there has been data corruption, you may need to do a total reset of the system and start again from scratch.</p><div class="admonition admonition-warning alert alert--danger"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="16" viewBox="0 0 12 16"><path fill-rule="evenodd" d="M5.05.31c.81 2.17.41 3.38-.52 4.31C3.55 5.67 1.98 6.45.9 7.98c-1.45 2.05-1.7 6.53 3.53 7.7-2.2-1.16-2.67-4.52-.3-6.61-.61 2.03.53 3.33 1.94 2.86 1.39-.47 2.3.53 2.27 1.67-.02.78-.31 1.44-1.13 1.81 3.42-.59 4.78-3.42 4.78-5.56 0-2.84-2.53-3.22-1.25-5.61-1.52.13-2.03 1.13-1.89 2.75.09 1.08-1.02 1.8-1.86 1.33-.67-.41-.66-1.19-.06-1.78C8.18 5.31 8.68 2.45 5.05.32L5.03.3l.02.01z"></path></svg></span>warning</h5></div><div class="admonition-content"><p>This will irrevocably delete ALL local data, ALL tokens, ALL admins and any other history or data which has been built up while using the wrapper. You will need to start again completely, adding all users again and creating new tokens. You will need to re-add FTP Credentials, which will request a new seed file from the remote FTP server.</p></div></div><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain"># Shut down the running system.</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">docker-compose down --remove-orphans</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"># List and remove volumes. THIS WILL REMOVE ALL USERS, TOKENS, DATA AND HISTORY.</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">docker volume ls</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">docker volume rm esr_api_db</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">docker volume rm esr_api_redis</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">docker volume rm esr_api_bundle_cache (Dev mode only)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">docker volume rm esr_api_db_test (Dev mode only)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"># Remove all stopped containers, caches and unused images from the entire system.</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"># WARNING: This is not limited to only this project, and will affect any other Docker systems you have</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"># on the same server.</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">docker system prune -a</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"># (Dev mode only)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"># Remove file indicating that the system has already been set up.</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">rm script/first_run_complete.tmp</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"># Remove all downloaded and uploaded .DAT files.</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">rm -rf data/</span></div></div></div></div></div><p>You can then follow the <a href="/esr_api/docs/quickstart">Quickstart Guide</a> to set the system up again.</p></div></article><div class="margin-vert--xl"><div class="row"><div class="col"><a href="https://github.com/sardjv/esr_api/docs/reset.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="1.2em" width="1.2em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 40 40" style="margin-right:0.3em;vertical-align:sub"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div></div></div><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Blog list page navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/esr_api/docs/development"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Â« Development</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/esr_api/docs/documentation"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Documentation Â»</div></a></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_3SO_"></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><h4 class="footer__title">Docs</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/esr_api/docs/quickstart">Quickstart</a></li><li class="footer__item"><a class="footer__link-item" href="/esr_api/docs/overview">Technical Overview</a></li><li class="footer__item"><a class="footer__link-item" href="/esr_api/docs/requirements">Requirements</a></li><li class="footer__item"><a class="footer__link-item" href="/esr_api/docs/development">Development</a></li><li class="footer__item"><a class="footer__link-item" href="/esr_api/docs/reset">System Reset</a></li><li class="footer__item"><a class="footer__link-item" href="/esr_api/docs/documentation">Documentation</a></li><li class="footer__item"><a class="footer__link-item" href="/esr_api/docs/versioning">Versioning</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">Community</h4><ul class="footer__items"><li class="footer__item"><a href="https://sardjv.co.uk/" target="_blank" rel="noopener noreferrer" class="footer__link-item">SARD JV</a></li><li class="footer__item"><a href="http://oxleas.nhs.uk/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Oxleas NHS Foundation Trust</a></li><li class="footer__item"><a href="https://twitter.com/sardjv" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">More</h4><ul class="footer__items"><li class="footer__item"><a href="https://github.com/sardjv/esr_api" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub</a></li></ul></div></div><div class="text--center"><div>Built with <a href="https://docusaurus.io/">Docusaurus</a>. Illustrations by <a href="https://www.drawkit.io/free">Drawkit</a>.</div></div></div></footer></div>
<script src="/esr_api/styles.30814504.js"></script>
<script src="/esr_api/runtime~main.c65e3950.js"></script>
<script src="/esr_api/main.2c04d539.js"></script>
<script src="/esr_api/1.9ca11672.js"></script>
<script src="/esr_api/2.76a9b4b6.js"></script>
<script src="/esr_api/19.a52b2436.js"></script>
<script src="/esr_api/20.8b904c54.js"></script>
<script src="/esr_api/935f2afb.6023516d.js"></script>
<script src="/esr_api/17896441.621aa397.js"></script>
<script src="/esr_api/4601e8b1.bea090d6.js"></script>
</body>
</html>