<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-alpha.65">
<title data-react-helmet="true">Quickstart | ESR API</title><meta data-react-helmet="true" name="docsearch:version" content="current,latest"><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:title" content="Quickstart | ESR API"><meta data-react-helmet="true" name="description" content="Any server or computer running this software MUST be totally secure, accessible only to privileged users, and administered by a professional sysadmin, as it will grant total access to ALL personally identifiable ESR data that is imported into it. The Docker environment is not inherently secure, and passwords set in the .env file are available on the host, as well as downloaded .DAT files containing ALL user data."><meta data-react-helmet="true" property="og:description" content="Any server or computer running this software MUST be totally secure, accessible only to privileged users, and administered by a professional sysadmin, as it will grant total access to ALL personally identifiable ESR data that is imported into it. The Docker environment is not inherently secure, and passwords set in the .env file are available on the host, as well as downloaded .DAT files containing ALL user data."><meta data-react-helmet="true" property="og:url" content="https://sardjv.github.io/esr_api/docs/quickstart"><link data-react-helmet="true" rel="shortcut icon" href="/esr_api/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://sardjv.github.io/esr_api/docs/quickstart"><link rel="stylesheet" href="/esr_api/styles.4900c5c4.css">
<link rel="preload" href="/esr_api/styles.30814504.js" as="script">
<link rel="preload" href="/esr_api/runtime~main.7c5e140f.js" as="script">
<link rel="preload" href="/esr_api/main.dcbef543.js" as="script">
<link rel="preload" href="/esr_api/1.91f73d9b.js" as="script">
<link rel="preload" href="/esr_api/2.ff5b4a48.js" as="script">
<link rel="preload" href="/esr_api/20.d184eae4.js" as="script">
<link rel="preload" href="/esr_api/21.ad624f39.js" as="script">
<link rel="preload" href="/esr_api/935f2afb.591a064a.js" as="script">
<link rel="preload" href="/esr_api/17896441.ea3ef7b3.js" as="script">
<link rel="preload" href="/esr_api/8070e160.fffd40ca.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><div aria-label="Navigation bar toggle" class="navbar__toggle" role="button" tabindex="0"><svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></div><a class="navbar__brand" href="/esr_api/"><img class="navbar__logo" src="/esr_api/img/logo.svg" alt="My Site Logo"><strong class="navbar__title">ESR API</strong></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/esr_api/docs/quickstart">Docs</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/sardjv/esr_api/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub</a><div class="react-toggle react-toggle--disabled displayOnlyInLargeViewport_2aTZ"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_BsTx">ðŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_BsTx">ðŸŒž</span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" disabled="" aria-label="Dark mode toggle" class="react-toggle-screenreader-only"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/esr_api/"><img class="navbar__logo" src="/esr_api/img/logo.svg" alt="My Site Logo"><strong class="navbar__title">ESR API</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a aria-current="page" class="menu__link navbar__link--active" href="/esr_api/docs/quickstart">Docs</a></li><li class="menu__list-item"><a href="https://github.com/sardjv/esr_api/" target="_blank" rel="noopener noreferrer" class="menu__link">GitHub</a></li></ul></div></div></div></nav><div class="main-wrapper"><div class="docPage_2gpo"><div class="docSidebarContainer_3_JD" role="complementary"><div class="sidebar_2urC"><div class="menu menu--responsive menu_5FrY"><button aria-label="Open Menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg aria-label="Menu" class="sidebarMenuIcon_Dm3K" xmlns="http://www.w3.org/2000/svg" height="24" width="24" viewBox="0 0 32 32" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!">Information</a><ul class="menu__list"><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/esr_api/docs/quickstart">Quickstart</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/esr_api/docs/overview">Technical Overview</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/esr_api/docs/authentication">Authentication</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/esr_api/docs/requirements">Requirements</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/esr_api/docs/development">Development</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/esr_api/docs/deltas">Existing Deltas</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/esr_api/docs/reset">System Reset</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/esr_api/docs/documentation">Documentation</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/esr_api/docs/licenses">Licenses</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/esr_api/docs/security">Security</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Features</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/esr_api/docs/api">API</a></li></ul></li></ul></div></div></div><main class="docMainContainer_3EyW"><div class="container padding-vert--lg docItemWrapper_1EkI"><div class="row"><div class="col docItemCol_2ASc"><div class="docItemContainer_3QWW"><article><header><h1 class="docTitle_1Lrw">Quickstart</h1></header><div class="markdown"><div class="admonition admonition-warning alert alert--danger"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="16" viewBox="0 0 12 16"><path fill-rule="evenodd" d="M5.05.31c.81 2.17.41 3.38-.52 4.31C3.55 5.67 1.98 6.45.9 7.98c-1.45 2.05-1.7 6.53 3.53 7.7-2.2-1.16-2.67-4.52-.3-6.61-.61 2.03.53 3.33 1.94 2.86 1.39-.47 2.3.53 2.27 1.67-.02.78-.31 1.44-1.13 1.81 3.42-.59 4.78-3.42 4.78-5.56 0-2.84-2.53-3.22-1.25-5.61-1.52.13-2.03 1.13-1.89 2.75.09 1.08-1.02 1.8-1.86 1.33-.67-.41-.66-1.19-.06-1.78C8.18 5.31 8.68 2.45 5.05.32L5.03.3l.02.01z"></path></svg></span>warning</h5></div><div class="admonition-content"><p>  Any server or computer running this software MUST be totally secure, accessible only to privileged users, and administered by a professional sysadmin, as it will grant total access to ALL personally identifiable ESR data that is imported into it. The Docker environment is not inherently secure, and passwords set in the .env file are available on the host, as well as downloaded .DAT files containing ALL user data.</p></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="env-file"></a>.env file<a aria-hidden="true" tabindex="-1" class="hash-link" href="#env-file" title="Direct link to heading">#</a></h3><ul><li>To get started, you need a <code>.env</code> file with secrets.</li><li>Generate it with the command <code>sh ./script/generate_env_file.sh</code>.</li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="booting-up"></a>Booting up<a aria-hidden="true" tabindex="-1" class="hash-link" href="#booting-up" title="Direct link to heading">#</a></h3><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">docker-compose up</span></div></div></div></div></div><p>It can then be accessed at <a href="http://localhost:3001/" target="_blank" rel="noopener noreferrer">http://localhost:3001/</a>.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="create-the-first-admin"></a>Create the first Admin<a aria-hidden="true" tabindex="-1" class="hash-link" href="#create-the-first-admin" title="Direct link to heading">#</a></h3><ul><li>Click &quot;Create an account&quot; and enter your details.</li><li>Admins can access ALL user data so this must be a highly privileged account with a very strong password. You will be immediately logged in.</li><li>Any subsequent admin that signs up must be manually approved by an existing admin, via the Admins page, clicking Edit and then Activated and Update User.</li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="set-up-the-ftp-connection"></a>Set up the FTP Connection<a aria-hidden="true" tabindex="-1" class="hash-link" href="#set-up-the-ftp-connection" title="Direct link to heading">#</a></h3><ul><li>You need to add the FTP connection details for your trust in order to use the API.</li><li>Click &quot;Ftp Credentials&quot;.</li><li>Click &quot;New ftp credential&quot;.</li><li>Enter your FTP connection details and press &quot;Create Ftp credential&quot;.</li><li>This will immediately send a request file to the FTP server <code>/In</code> directory for the initial seed data.</li><li>From this point the API will attempt to fetch and import new data from the FTP server each day at 8am.</li></ul><div class="admonition admonition-info alert alert--info"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</h5></div><div class="admonition-content"><p>Note: if your trust is already using the FTP service, you may need to change the filename of the seed request to match the time of the last delta. <a href="/esr_api/docs/quickstart">Click here for more info.</a></p></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="create-an-api-token"></a>Create an API Token<a aria-hidden="true" tabindex="-1" class="hash-link" href="#create-an-api-token" title="Direct link to heading">#</a></h3><ul><li>Each client application requires a Token to use the API.</li><li>Click &quot;API Tokens&quot;.</li><li>Click &quot;New token&quot;.</li><li>Give the token a name to identify which client application will use the token.</li><li>Add permissions to give access to the data that the client application requires.</li><li>Click Create Token.</li><li>You will be able to view the secret token only once. Be very careful with it as it grants unimpeded access to confidential user data.</li><li>Securely add to your client application so that it can use the API.</li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="use-the-api"></a>Use the API<a aria-hidden="true" tabindex="-1" class="hash-link" href="#use-the-api" title="Direct link to heading">#</a></h3><ul><li>The API documentation can be viewed at <a href="http://localhost:3001/api_docs" target="_blank" rel="noopener noreferrer">http://localhost:3001/api_docs</a>.</li><li>You can use this page to test the API - click &quot;Authorize&quot; and add a Token.</li><li>Click on an endpoint and click &quot;Try it out&quot; and &quot;Execute&quot; to get a response.</li></ul></div></article><div class="margin-vert--xl"><div class="row"><div class="col"><a href="https://github.com/sardjv/esr_api/docs/quickstart.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="1.2em" width="1.2em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 40 40" style="margin-right:0.3em;vertical-align:sub"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div></div></div><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Blog list page navigation"><div class="pagination-nav__item"></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/esr_api/docs/overview"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Technical Overview Â»</div></a></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_3SO_"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#env-file" class="table-of-contents__link">.env file</a></li><li><a href="#booting-up" class="table-of-contents__link">Booting up</a></li><li><a href="#create-the-first-admin" class="table-of-contents__link">Create the first Admin</a></li><li><a href="#set-up-the-ftp-connection" class="table-of-contents__link">Set up the FTP Connection</a></li><li><a href="#create-an-api-token" class="table-of-contents__link">Create an API Token</a></li><li><a href="#use-the-api" class="table-of-contents__link">Use the API</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><h4 class="footer__title">Docs</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/esr_api/docs/quickstart">Quickstart</a></li><li class="footer__item"><a class="footer__link-item" href="/esr_api/docs/overview">Technical Overview</a></li><li class="footer__item"><a class="footer__link-item" href="/esr_api/docs/requirements">Requirements</a></li><li class="footer__item"><a class="footer__link-item" href="/esr_api/docs/development">Development</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">Community</h4><ul class="footer__items"><li class="footer__item"><a href="https://sardjv.co.uk/" target="_blank" rel="noopener noreferrer" class="footer__link-item">SARD JV</a></li><li class="footer__item"><a href="http://oxleas.nhs.uk/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Oxleas NHS Foundation Trust</a></li><li class="footer__item"><a href="https://twitter.com/sardjv" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">More</h4><ul class="footer__items"><li class="footer__item"><a href="https://github.com/sardjv/esr_api" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub</a></li></ul></div></div><div class="text--center"><div>Built with <a href="https://docusaurus.io/">Docusaurus</a>. Illustrations by <a href="https://www.drawkit.io/free">Drawkit</a>.</div></div></div></footer></div>
<script src="/esr_api/styles.30814504.js"></script>
<script src="/esr_api/runtime~main.7c5e140f.js"></script>
<script src="/esr_api/main.dcbef543.js"></script>
<script src="/esr_api/1.91f73d9b.js"></script>
<script src="/esr_api/2.ff5b4a48.js"></script>
<script src="/esr_api/20.d184eae4.js"></script>
<script src="/esr_api/21.ad624f39.js"></script>
<script src="/esr_api/935f2afb.591a064a.js"></script>
<script src="/esr_api/17896441.ea3ef7b3.js"></script>
<script src="/esr_api/8070e160.fffd40ca.js"></script>
</body>
</html>